# Canton MCP Server Environment Configuration
# Copy this file to .env.canton and fill in your values

# =============================================================================
# MCP Server Configuration
# =============================================================================
MCP_SERVER_URL=http://localhost:7284

# =============================================================================
# DAML SDK Configuration
# =============================================================================
# DAML SDK version to use for compilation safety checks
# Default: 3.4.0-snapshot.20251013.0
# Options: Use any installed version from `daml version`
DAML_SDK_VERSION=3.4.0-snapshot.20251013.0

# =============================================================================
# x402 Payment Configuration - USDC on Base Sepolia (EVM)
# =============================================================================
# Enable USDC payments on Base Sepolia
X402_ENABLED=false

# Your Ethereum wallet address (receives USDC payments)
X402_WALLET_ADDRESS=

# Private key for your wallet (optional, for automated settlement)
X402_WALLET_PRIVATE_KEY=

# Network: base-sepolia, base-mainnet, etc.
X402_NETWORK=base-sepolia

# Token: USDC
X402_TOKEN=USDC

# Internal API key for payment bypass (optional, for internal services)
X402_INTERNAL_API_KEY=

# =============================================================================
# Canton x402 Payment Configuration - Canton Coins on Canton Network
# =============================================================================
# Enable Canton Coin payments on Canton Network
CANTON_ENABLED=false

# URL of your Canton x402 facilitator service
CANTON_FACILITATOR_URL=http://localhost:3000

# Your Canton party identifier (receives Canton Coin payments)
# Example: ServiceProvider::12207d6f70656e2d736f757263652d6c6564676572
CANTON_PAYEE_PARTY=

# Canton network: canton-local, canton-testnet, canton-mainnet
CANTON_NETWORK=canton-local

# =============================================================================
# Pricing Configuration
# =============================================================================
X402_PRICING_MODE=dynamic
X402_MIN_PAYMENT=0.001
X402_MAX_PAYMENT=10.0

# =============================================================================
# Payment Processing
# =============================================================================
X402_VERIFICATION_TIMEOUT=30
X402_SETTLEMENT_TIMEOUT=60

# =============================================================================
# DCAP (Distributed Claude Agent Protocol) Configuration
# =============================================================================
# Enable DCAP performance tracking and tool discovery
DCAP_ENABLED=true

# DCAP multicast IP (leave empty to disable multicast)
DCAP_MULTICAST_IP=

# DCAP port
DCAP_PORT=10191

# Server identification
DCAP_SERVER_ID=canton-mcp
DCAP_SERVER_NAME=Canton MCP Server

# Default values when caller/payer cannot be determined
DCAP_DEFAULT_CALLER=unknown-client
DCAP_DEFAULT_PAYER=0x0000000000000000000000000000000000000000

# =============================================================================
# LLM Enrichment Configuration
# =============================================================================
# Enable LLM-based enrichment of canonical resources for better search relevance
# Requires ANTHROPIC_API_KEY to be set
ENABLE_LLM_ENRICHMENT=false

# Anthropic API key for Claude Haiku (required if ENABLE_LLM_ENRICHMENT=true)
ANTHROPIC_API_KEY=

# Claude model to use for enrichment (default: claude-3-5-haiku-20241022)
LLM_ENRICHMENT_MODEL=claude-3-5-haiku-20241022

# Batch size for enrichment (default: 20)
LLM_ENRICHMENT_BATCH_SIZE=20

# Max tokens for enrichment responses (default: 500)
LLM_ENRICHMENT_MAX_TOKENS=500

# =============================================================================
# LLM Authorization Extraction Configuration (PRIMARY METHOD)
# =============================================================================
# Enable LLM-based authorization extraction for DAML code analysis
# When enabled: Uses Claude Haiku for robust, reliable extraction (RECOMMENDED)
# When disabled: Falls back to regex patterns (degraded mode, simple patterns only)
#
# RECOMMENDED: true for production use
ENABLE_LLM_AUTH_EXTRACTION=true

# Confidence threshold for delegation (0.0-1.0)
# If LLM confidence falls below this, or if LLM unavailable with complex patterns,
# the tool will delegate back to calling LLM for human review
# Default: 0.7 (70% confidence)
LLM_AUTH_CONFIDENCE_THRESHOLD=0.7

# Note: When LLM is enabled, it becomes the PRIMARY analysis method.
# Costs are automatically included in x402 pricing (pay for what you use).
# Without LLM, only simple DAML patterns can be analyzed reliably.

